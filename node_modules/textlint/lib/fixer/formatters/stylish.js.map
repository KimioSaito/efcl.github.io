{"version":3,"sources":["../../../src/fixer/formatters/stylish.js"],"names":[],"mappings":"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","file":"stylish.js","sourcesContent":["\"use strict\";\nvar chalk = require(\"chalk\");\nvar table = require(\"text-table\");\nvar widthOfString = require(\"string-width\");\n\n/**\n * Given a word and a count, append an s if count is not one.\n * @param {string} word A word in its singular form.\n * @param {int} count A number controlling whether word should be pluralized.\n * @returns {string} The original word with an s on the end if count is not one.\n */\nfunction pluralize(word, count) {\n    return (count === 1 ? word : word + \"s\");\n}\n\nmodule.exports = function (results, options) {\n    // default: true\n    chalk.enabled = options.color !== undefined ? options.color : true;\n    var output = \"\\n\";\n    var totalFixed = 0;\n    var errors = 0;\n    var summaryColor = \"yellow\";\n    var greenColor = \"green\";\n\n    results.forEach(function (result) {\n        var messages = result.applyingMessages;\n        // still error count\n        var remainingMessages = result.remainingMessages;\n        errors += remainingMessages.length;\n        if (messages.length === 0) {\n            return;\n        }\n\n        output += chalk.underline(result.filePath) + \"\\n\";\n\n        output += table(\n                messages.map(function (message) {\n                    // fixable\n                    totalFixed++;\n                    var messageType = chalk[greenColor].bold(\"\\u2714 \");\n\n                    return [\n                        \"\",\n                        message.line || 0,\n                        message.column || 0,\n                        messageType,\n                        message.message.replace(/\\.$/, \"\"),\n                        chalk.gray(message.ruleId || \"\")\n                    ];\n                }),\n                {\n                    align: [\"\", \"r\", \"l\"],\n                    stringLength: function (str) {\n                        var lines = chalk.stripColor(str).split(\"\\n\");\n                        return Math.max.apply(null, lines.map(function (line) {\n                            return widthOfString(line);\n                        }));\n                    }\n                }\n            ).split(\"\\n\").map(function (el) {\n                return el.replace(/(\\d+)\\s+(\\d+)/, function (m, p1, p2) {\n                    return chalk.gray(p1 + \":\" + p2);\n                });\n            }).join(\"\\n\") + \"\\n\\n\";\n    });\n\n    if (totalFixed > 0) {\n        output += chalk[greenColor].bold([\n            // http://www.fileformat.info/info/unicode/char/2714/index.htm\n            \"\\u2714 Fixed \", totalFixed, pluralize(\" problem\", totalFixed), \"\\n\"\n        ].join(\"\"));\n    }\n\n    if (errors > 0) {\n        output += chalk[summaryColor].bold([\n            // http://www.fileformat.info/info/unicode/char/2716/index.htm\n            \"\\u2716 Remaining \", errors, pluralize(\" problem\", errors), \"\\n\"\n        ].join(\"\"));\n    }\n\n    return totalFixed > 0 ? output : \"\";\n};\n"]}